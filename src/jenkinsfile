pipeline {
    agent any

    stages {
        stage('Checkout') {
            steps {
                // Jenkins clona tu repositorio automáticamente.
                // Este paso es solo informativo para que veas en el log que se obtuvo el código.
                echo 'Obteniendo el código fuente del catálogo de comida...'
            }
        }
        stage('Build') {
            steps {
                // Para una aplicación web estática, no hay un proceso de compilación como en Java o Node.js.
                // El "build" es simplemente tener los archivos listos.
                echo 'Build: La aplicación es estática, no se requiere compilación.'
            }
        }
        stage('Test') {
            steps {
                // Aquí podrías correr pruebas automatizadas (ej. de usabilidad, de linting de JS, etc.).
                // Para este caso, solo lo simulamos.
                echo 'Test: Ejecutando pruebas (simulado).'
            }
        }
        stage('Package Release') {
            steps {
                echo 'Package: Creando el artefacto del catálogo...'
                // Este es el comando clave. Crea un archivo .zip con todo el contenido de tu app.
                // El ${BUILD_NUMBER} es una variable de Jenkins que asegura que cada zip tenga un nombre único.
                sh "zip -r devops-final-v${BUILD_NUMBER}.zip ./*"
            }
        }
    }
    post {
        success {
            echo '¡Pipeline ejecutado con éxito!'
            // Este paso es CRUCIAL. Le dice a Jenkins que guarde el archivo .zip como un artefacto.
            // Podrás descargarlo desde la interfaz web de Jenkins.
            archiveArtifacts artifacts: '*.zip', fingerprint: true
        }
        failure {
            echo 'ERROR: El pipeline ha fallado. Revisa los logs para más detalles.'
        }
    }
}